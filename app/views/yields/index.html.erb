<script>
$(document).ready(function() {
    $('#yields').tablesorter();
  }
);
</script>
<h1>Listing Yields</h1>

<table id="yields" style="width: auto;" class="table table-bordered table-striped tablesorter">
  <thead class="pointer-cursor">
    <tr>
      <th>Ore Variation</th>
      <% @minerals.each do |mineral| %>
        <th><%= mineral.name %></th>
      <% end %>
      <th class="edit-field">Edit</th>
    </tr>
  </thead>
  <tbody>
    <% @variations.each do |variation| %>
      <tr>
        <td><b><%= link_to variation.name, variation %></b></td>
        <% @minerals.each do |mineral| %>
          <td>
            <% y = @yields.detect { |y| y[:variation_id] == variation.id && y[:mineral_id] == mineral.id } %>
            <%= y.nil? ? 0 : y[:quantity] %>
          </td>
        <% end %>
        <td>
          <%= link_to image_tag("/edit.png", :alt => "Edit"), add_yields_variation_path(variation) %>
          <%= image_tag("/delete.png", :alt => "Delete") %>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>
